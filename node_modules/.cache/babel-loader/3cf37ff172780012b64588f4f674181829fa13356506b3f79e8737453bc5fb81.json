{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useCallback, useEffect } from \"react\";\nimport { UseMealDispatch } from \"../Context/mealctx\";\nimport { actions } from \"../Context/mealReducer\";\nimport { useFiltersContext } from \"../Context/filtersCtx\";\nimport { SearchMealByName, FetchMealByFirstLetter } from \"../services/mealtService\";\nconst useMeals = () => {\n  _s();\n  const dispatch = UseMealDispatch();\n  const {\n    filters\n  } = useFiltersContext();\n  const fetchAllMeals = async () => {\n    let allMeals = [];\n    if (filters.search) {\n      const meals = await SearchMealByName(filters.search);\n      allMeals = meals || [];\n    }\n    return allMeals;\n  };\n  const fetchMeals = useCallback(async () => {\n    dispatch({\n      type: actions.SET_LOADING,\n      payload: true\n    });\n    try {\n      if (filters.search) {\n        const allMeals = await fetchAllMeals();\n        console.log(allMeals);\n        if (allMeals.length > 0) {\n          dispatch({\n            type: actions.SET_MEALS,\n            payload: allMeals\n          });\n        } else {\n          dispatch({\n            type: actions.SET_MEALS,\n            payload: []\n          });\n        }\n      } else {\n        const mealsByLetter = await FetchMealByFirstLetter();\n        dispatch({\n          type: actions.SET_MEALS,\n          payload: mealsByLetter\n        });\n      }\n    } catch (error) {\n      console.error(\"Error fetching Meals: \", error);\n      dispatch({\n        type: actions.SET_MEALS,\n        payload: []\n      });\n    }\n    dispatch({\n      type: actions.SET_LOADING,\n      payload: false\n    });\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [dispatch, filters]);\n  useEffect(() => {\n    fetchMeals();\n  }, [fetchMeals]);\n};\n_s(useMeals, \"xyEq8tHi1HDQqeKjr+W1/yaGD3w=\", false, function () {\n  return [useFiltersContext];\n});\nexport default useMeals;","map":{"version":3,"names":["useCallback","useEffect","UseMealDispatch","actions","useFiltersContext","SearchMealByName","FetchMealByFirstLetter","useMeals","_s","dispatch","filters","fetchAllMeals","allMeals","search","meals","fetchMeals","type","SET_LOADING","payload","console","log","length","SET_MEALS","mealsByLetter","error"],"sources":["C:/Users/tomas/OneDrive/Documentos/universidad/Semestre 8/react/DWRJS-segundo-parcial-Tomas-Candelo/src/hooks/useMeals.js"],"sourcesContent":["import { useCallback, useEffect } from \"react\";\r\nimport { UseMealDispatch } from \"../Context/mealctx\";\r\nimport { actions } from \"../Context/mealReducer\";\r\nimport { useFiltersContext } from \"../Context/filtersCtx\";\r\nimport { SearchMealByName, FetchMealByFirstLetter } from \"../services/mealtService\";\r\n\r\n\r\nconst useMeals = () => {\r\n    const dispatch = UseMealDispatch();\r\n    const { filters } = useFiltersContext();\r\n\r\n    const fetchAllMeals = async () => {\r\n        let allMeals = [];\r\n\r\n        if (filters.search) {\r\n            const meals = await SearchMealByName(filters.search);\r\n            allMeals = meals || [];\r\n        }\r\n        \r\n        return allMeals;\r\n    };\r\n\r\n    const fetchMeals = useCallback(async () => {\r\n        dispatch({ type: actions.SET_LOADING, payload: true });\r\n\r\n        try {\r\n            if (filters.search) {\r\n                const allMeals = await fetchAllMeals();\r\n                console.log(allMeals);\r\n\r\n                if (allMeals.length > 0) {\r\n                    dispatch({type: actions.SET_MEALS, payload: allMeals });\r\n                } else {\r\n                    dispatch({type: actions.SET_MEALS, payload: []});\r\n                }\r\n            } else {\r\n                const mealsByLetter = await FetchMealByFirstLetter();\r\n                dispatch({ type: actions.SET_MEALS, payload:mealsByLetter });\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error fetching Meals: \", error);\r\n            dispatch({ type: actions.SET_MEALS, payload: []});\r\n        }\r\n\r\n        dispatch({ type: actions.SET_LOADING, payload: false});\r\n\r\n        \r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [dispatch, filters]);\r\n\r\n    useEffect(() => {\r\n        fetchMeals();\r\n    }, [fetchMeals]);\r\n\r\n};\r\n\r\nexport default useMeals;"],"mappings":";AAAA,SAASA,WAAW,EAAEC,SAAS,QAAQ,OAAO;AAC9C,SAASC,eAAe,QAAQ,oBAAoB;AACpD,SAASC,OAAO,QAAQ,wBAAwB;AAChD,SAASC,iBAAiB,QAAQ,uBAAuB;AACzD,SAASC,gBAAgB,EAAEC,sBAAsB,QAAQ,0BAA0B;AAGnF,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACnB,MAAMC,QAAQ,GAAGP,eAAe,CAAC,CAAC;EAClC,MAAM;IAAEQ;EAAQ,CAAC,GAAGN,iBAAiB,CAAC,CAAC;EAEvC,MAAMO,aAAa,GAAG,MAAAA,CAAA,KAAY;IAC9B,IAAIC,QAAQ,GAAG,EAAE;IAEjB,IAAIF,OAAO,CAACG,MAAM,EAAE;MAChB,MAAMC,KAAK,GAAG,MAAMT,gBAAgB,CAACK,OAAO,CAACG,MAAM,CAAC;MACpDD,QAAQ,GAAGE,KAAK,IAAI,EAAE;IAC1B;IAEA,OAAOF,QAAQ;EACnB,CAAC;EAED,MAAMG,UAAU,GAAGf,WAAW,CAAC,YAAY;IACvCS,QAAQ,CAAC;MAAEO,IAAI,EAAEb,OAAO,CAACc,WAAW;MAAEC,OAAO,EAAE;IAAK,CAAC,CAAC;IAEtD,IAAI;MACA,IAAIR,OAAO,CAACG,MAAM,EAAE;QAChB,MAAMD,QAAQ,GAAG,MAAMD,aAAa,CAAC,CAAC;QACtCQ,OAAO,CAACC,GAAG,CAACR,QAAQ,CAAC;QAErB,IAAIA,QAAQ,CAACS,MAAM,GAAG,CAAC,EAAE;UACrBZ,QAAQ,CAAC;YAACO,IAAI,EAAEb,OAAO,CAACmB,SAAS;YAAEJ,OAAO,EAAEN;UAAS,CAAC,CAAC;QAC3D,CAAC,MAAM;UACHH,QAAQ,CAAC;YAACO,IAAI,EAAEb,OAAO,CAACmB,SAAS;YAAEJ,OAAO,EAAE;UAAE,CAAC,CAAC;QACpD;MACJ,CAAC,MAAM;QACH,MAAMK,aAAa,GAAG,MAAMjB,sBAAsB,CAAC,CAAC;QACpDG,QAAQ,CAAC;UAAEO,IAAI,EAAEb,OAAO,CAACmB,SAAS;UAAEJ,OAAO,EAACK;QAAc,CAAC,CAAC;MAChE;IACJ,CAAC,CAAC,OAAOC,KAAK,EAAE;MACZL,OAAO,CAACK,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;MAC9Cf,QAAQ,CAAC;QAAEO,IAAI,EAAEb,OAAO,CAACmB,SAAS;QAAEJ,OAAO,EAAE;MAAE,CAAC,CAAC;IACrD;IAEAT,QAAQ,CAAC;MAAEO,IAAI,EAAEb,OAAO,CAACc,WAAW;MAAEC,OAAO,EAAE;IAAK,CAAC,CAAC;;IAG1D;EACA,CAAC,EAAE,CAACT,QAAQ,EAAEC,OAAO,CAAC,CAAC;EAEvBT,SAAS,CAAC,MAAM;IACZc,UAAU,CAAC,CAAC;EAChB,CAAC,EAAE,CAACA,UAAU,CAAC,CAAC;AAEpB,CAAC;AAACP,EAAA,CA/CID,QAAQ;EAAA,QAEUH,iBAAiB;AAAA;AA+CzC,eAAeG,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}